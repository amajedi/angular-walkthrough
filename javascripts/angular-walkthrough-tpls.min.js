!function(a,b,c){"use strict";angular.module("angular-walkthrough",["templates"]),angular.module("templates",["wt-popover-toolbar.html"]),angular.module("wt-popover-toolbar.html",[]).run(["$templateCache",function(a){a.put("wt-popover-toolbar.html",'<div class="wt-popover-tb">\n    <span class="tb-left">\n        <span>\n         {{wtStep}} of {{totalSteps}}\n        </span>\n        <span>\n         <a ng-click="cancel()">\n               Cancel\n            </a>\n        </span>\n        <span ng-if="wtStep > 1">\n          <a ng-click="restart()">\n              Restart\n           </a>\n        </span>\n        <span ng-if="wtStep > 1">\n          <a ng-click="previous()">\n             Back\n          </a>\n        </span>\n    </span>\n    <span class="tb-right">\n        <button ng-click="next()" class="btn btn-primary btn-xs next-btn">\n           {{ wtBtnText ? wtBtnText : ((totalSteps == wtStep) ? "Finish" : "Next") }}\n        </button>\n    </span>\n</div>')}]),angular.module("angular-walkthrough").directive("wtStepContent",[function(){return{restrict:"E",require:"^^wtStep",transclude:!0,scope:{},link:function(a,b,c,d,e){e(a.$parent.$new(),function(a,b){var c=angular.element("<div></div>").append(a);d._registerContent(c),a.on("$destroy",function(){b.$destroy()})}),a.$on("$destroy",function(){d._unregisterContent()})}}}]),angular.module("angular-walkthrough").controller("StepController",["$scope",function(a){var b=this;b._contentElement=null,b._registerContent=function(a){b._contentElement?console.log("Multiple wtStepContent directives detected. Only one is allowed per wtStep."):b._contentElement=a},b._unregisterContent=function(){this._contentElement=null}}]),angular.module("angular-walkthrough").directive("wtStep",["$compile","$q","$document","$templateCache",function(a,b,c,d){return{restrict:"A",require:["^walkthrough","wtStep"],scope:{wtText:"@",wtPosition:"@",wtGroup:"@",wtBtnText:"@",wtOnNext:"&"},controller:"StepController",link:function(c,e,f,g){var h=g[0],i=g[1];if(f.wtStep?c.wtStep=f.wtStep:console.log("Missing step number on wtStep directive"),i._contentElement||c.wtText){c.cancel=h.cancel,c.next=function(){c.wtOnNext&&c.wtOnNext(),h.next()},c.restart=h.start,c.previous=h.prev,c.$watch(function(){return h._getNumSteps(c.wtGroup)},function(a,b){a&&(c.totalSteps=a)});var j=a(d.get("wt-popover-toolbar.html"))(c);if(!i._contentElement){var k=angular.element("<div></div>").html(c.wtText);i._registerContent(k)}if(i._contentElement.append(j),"wtInteract"in f){var k=i._contentElement[0].querySelector(".next-btn");angular.element(k).addClass("hide")}var l,m;h._registerStep({step:parseInt(c.wtStep),group:c.wtGroup||"default",show:function(){function a(a,b){return angular.element(a).css(b)}var d=b.defer();e.popover({html:!0,trigger:"manual",container:"body",template:'<div class="popover wt-popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content wt-popover-content"></div></div>',viewport:{selector:"body",padding:2},placement:c.wtPosition?c.wtPosition:"auto",content:function(){return i._contentElement}}),e.on("shown.bs.popover",function(){d.resolve()}),l=e.css("z-index"),m=e.css("position"),e.css({"z-index":9999999,position:"relative"}),e.popover("show"),h._addHelperLayer(e),"wtInteract"in f||h._addCoverLayer(e);for(var g=e[0].parentNode;null!=g&&"body"!==g.tagName.toLowerCase();){var j=a(g,"z-index"),k=parseFloat(a(g,"opacity")),n=a(g,"transform")||a(g,"-webkit-transform")||a(g,"-moz-transform")||a(g,"-ms-transform")||a(g,"-o-transform");(/[0-9]+/.test(j)||1>k||"none"!==n)&&(g.className+=" wt-fixParent"),g=g.parentNode}return d.promise},hide:function(){var a=b.defer();e.on("hidden.bs.popover",function(){e.popover("destroy"),a.resolve()}),e.css({"z-index":l,position:m});for(var c=e[0].parentNode;null!=c&&"body"!==c.tagName.toLowerCase();)c.className.indexOf(!1)&&(c.className=c.className.replace(/wt-fixParent/g,"").replace(/^\s+|\s+$/g,"")),c=c.parentNode;return e.popover("hide"),h._removeHelperLayer(),h._removeCoverLayer(),a.promise}})}else console.log("wtStep directive is missing content, need either wtText or wtStepContent.")}}}]),angular.module("angular-walkthrough").controller("WalkThroughController",["$scope","$rootScope","$q",function(a,b,d){var e=this;e.activeStep=null,e.registeredSteps={},e.start=function(b){console.log("start: "+b),a._addOverlayLayer(),e._showNextStep(1,b)},e.next=function(){e._showNextStep()},e.prev=function(){e._showPreviousStep()},e.cancel=function(){var b=d.defer();return a._removeOverlayLayer(),e.activeStep&&e.activeStep.hide().then(function(){e.activeStep=c,b.resolve()}),b.promise},e.active=function(){return e.activeStep?!0:!1},e._registerStep=function(a){e.registeredSteps[a.group]||(e.registeredSteps[a.group]={}),e.registeredSteps[a.group][a.step]=a},e._showNextStep=function(a,b){function c(a,b){e.activeStep=e.registeredSteps[b][a],e.activeStep.show()}var d=a||(e.activeStep?e.activeStep.step+1:1),f=b||(e.activeStep?e.activeStep.group:"default");e.registeredSteps[f]&&e.registeredSteps[f][d]?e.activeStep?e.activeStep.hide().then(function(){c(d,f)}):c(d,f):e.cancel()},e._showPreviousStep=function(){e.activeStep&&e.registeredSteps[e.activeStep.group][e.activeStep.step-1]&&e._showNextStep(e.activeStep.step-1)},e._getNumSteps=function(a){return a=a||"default",Object.keys(e.registeredSteps[a]).length},e._addHelperLayer=function(b){a._addHelperLayer(b)},e._removeHelperLayer=function(){a._removeHelperLayer()},e._addCoverLayer=function(b){a._addCoverLayer(b)},e._removeCoverLayer=function(){a._removeCoverLayer()}}]),angular.module("angular-walkthrough").directive("walkthrough",["$rootScope","$document",function(a,b){return{restrict:"A",scope:{wtStart:"=",wtNext:"=",wtPrev:"=",wtCancel:"=",wtActive:"="},controller:"WalkThroughController",link:function(a,b,c,d){"wtStart"in c&&(a.wtStart=d.start),"wtNext"in c&&(a.wtNext=d.next),"wtPrev"in c&&(a.wtPrev=d.prev),"wtCancel"in c&&(a.wtCancel=d.cancel),"wtActive"in c&&(a.wtActive=d.active);var e=!1,f=angular.element("<div></div>").addClass("wt-overlay");a._addOverlayLayer=function(){if("body"===b[0].tagName.toLowerCase())f.css({top:0,bottom:0,left:0,right:0,position:"fixed"});else{var a=b[0].getBoundingClientRect();f.css({width:b[0].offsetWidth,height:b[0].offsetHeight,top:a.top,left:reft.left})}e||(e=!0,b.append(f))},a._removeOverlayLayer=function(){e=!1,f.remove()};var g=!1,h=angular.element('<div class="wt-helperLayer"></div>');a._addHelperLayer=function(a){var c=a[0].getBoundingClientRect();h.css({top:c.top,left:c.left,width:a[0].offsetWidth,height:a[0].offsetHeight}),g||b.append(h)},a._removeHelperLayer=function(){g=!1,h.remove()};var i=!1,j=angular.element('<div class="wt-coverLayer"></div>');a._addCoverLayer=function(a){var c=a[0].getBoundingClientRect();j.css({top:c.top,left:c.left,width:a[0].offsetWidth,height:a[0].offsetHeight}),i||(i=!0,b.append(j))},a._removeCoverLayer=function(){i=!1,j.remove()}}}}])}(window,document);